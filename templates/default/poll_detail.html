{% extends "base.html" %}

{% block extra_css %}
<style>
    .order-form-container { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); margin-top: 20px; }
    h1 { font-size: 2.5rem; text-align: center; color: #2c3e50; }
    h3 { font-size: 1.5rem; color: #e67e22; border-bottom: 2px solid #f1c40f; padding-bottom: 5px; margin-top: 25px; }

    /* ç®¡ç†å€å¡Šæ¨£å¼ */
    .admin-box { background: #f9f9f9; padding: 15px; border-radius: 12px; margin-top: 15px; border: 1px dashed #ccc; }
    .option-row { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #eee; }
    .price-tag { color: #e74c3c; font-weight: bold; margin-left: 10px; }
    
    /* æŒ‰éˆ•æ¨£å¼ */
    .btn-edit { color: #f39c12; text-decoration: none; font-size: 1.1rem; margin-right: 10px; }
    .btn-delete { color: #e74c3c; text-decoration: none; font-size: 1.1rem; }
    .btn-add { display: inline-block; margin-top: 10px; color: #27ae60; text-decoration: none; font-weight: bold; font-size: 1.2rem; }

    .submit-btn {
        background-color: #27ae60; color: white; border: none; padding: 15px 30px;
        font-size: 1.5rem; border-radius: 50px; cursor: pointer; width: 100%;
        margin-top: 30px; transition: 0.3s;
    }
    .submit-btn:hover { background-color: #2ecc71; transform: scale(1.02); }
</style>
{% endblock %}

{% block main %}
<h1>ğŸ¹ {{ poll.subject }}</h1>

<div class="admin-box">
    <strong>ğŸ› ï¸ é£²å“é¸å–®ç®¡ç†</strong>
    <div style="margin-top: 10px;">
        {% for option in options %}
        <div class="option-row">
            <span>
                {{ option.title }} <span class="price-tag">${{ option.price }}</span>
            </span>
            <div>
                <a href="/option/{{ option.id }}/update/" class="btn-edit">ğŸ–Šï¸ ä¿®æ”¹åƒ¹æ ¼/åç¨±</a>
                <a href="/option/{{ option.id }}/delete/" class="btn-delete">ğŸ—‘ï¸ åˆªé™¤</a>
            </div>
        </div>
        {% endfor %}
    </div>
    <a href="/option/create/{{ poll.id }}/" class="btn-add">â• æ–°å¢é£²å“é¸é …</a>
</div>

<div class="order-form-container">
    <form action="/submit_order/" method="POST">
        {% csrf_token %}
        
        <h3>1. é¸æ“‡ä½ æƒ³å–çš„</h3>
        <select name="drink" required>
            <option value="" disabled selected>--- è«‹é¸æ“‡é£²å“ ---</option>
            {% for option in options %}
                <option value="{{ option.id }}">{{ option.title }} â€” ${{ option.price }}</option>
            {% endfor %}
        </select>

        <h3>2. ç”œåº¦(å¿…å¡«)</h3>
        <select name="sugar" required>
            <option value="" disabled selected>--- è«‹é¸æ“‡ç”œåº¦ ---</option>
            {% for s in sugar_levels %}
                <option value="{{ s.id }}">{{ s.level }}</option>
            {% endfor %}
        </select>

        <h3>3. å†°å¡Š(å¿…å¡«)</h3>
        <select name="ice" required>
            <option value="" disabled selected>--- è«‹é¸æ“‡å†°å¡Š ---</option>
            {% for i in ice_levels %}
                <option value="{{ i.id }}">{{ i.level }}</option>
            {% endfor %}
        </select>

        <h3>4. æƒ³è¦åŠ é»æ–™å—ï¼Ÿ (å¯è¤‡é¸)</h3>
        <div>
            {% for t in toppings %}
            <label style="font-size: 1.2rem; display: block; margin: 5px 0;">
                <input type="checkbox" name="toppings" value="{{ t.id }}"> {{ t.name }} (+${{ t.price }})
            </label>
            {% endfor %}
        </div>

        <button type="submit" class="submit-btn">ç¢ºèªä¸‹å–®ä¸¦å›å‚³è³‡æ–™</button>
    </form>
</div>
{% endblock %}