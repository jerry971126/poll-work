{% extends "base.html" %}

{% block extra_css %}
<style>
    .order-form-container { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); margin-top: 20px; }
    h1 { font-size: 2.5rem; text-align: center; color: #2c3e50; }
    h3 { font-size: 1.5rem; color: #e67e22; border-bottom: 2px solid #f1c40f; padding-bottom: 5px; margin-top: 25px; }

    /* ç®¡ç†å“¡ç®¡ç†å€å¡Šæ¨£å¼ */
    .admin-box { background: #fdf2f2; padding: 20px; border-radius: 15px; border: 2px dashed #e74c3c; margin-bottom: 30px; }
    .manage-item { display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid #ddd; font-size: 1.2rem; }
    
    select { width: 100%; padding: 12px; font-size: 1.2rem; border-radius: 8px; border: 1px solid #ddd; margin-top: 10px; }
    .topping-item { font-size: 1.2rem; margin: 10px 0; display: block; }

    .submit-btn {
        background-color: #27ae60; color: white; border: none; padding: 15px 30px;
        font-size: 1.5rem; border-radius: 50px; cursor: pointer; width: 100%;
        margin-top: 30px; transition: 0.3s;
    }
    .submit-btn:hover { background-color: #2ecc71; transform: scale(1.02); }
</style>
{% endblock %}

{% block main %}
<h1>ğŸ¹ {{ poll.subject }}</h1>

{% if user.is_superuser %}
<div class="admin-box">
    <strong style="color: #c0392b;">ğŸ› ï¸ èœå–®ç®¡ç† (åƒ…ç®¡ç†å“¡å¯ä¿®æ”¹/åˆªé™¤)</strong>
    {% for option in options %}
    <div class="manage-item">
        <span>{{ option.title }} â€” ${{ option.price }}</span>
        <div>
            <a href="/option/{{ option.id }}/update/" style="color: #f39c12;">ğŸ–Šï¸ ä¿®æ”¹</a>
            <a href="/option/{{ option.id }}/delete/" style="color: #c0392b; margin-left: 10px;">ğŸ—‘ï¸ åˆªé™¤</a>
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}

<div style="margin-top: 15px; text-align: center;">
    <a href="/option/create/{{ poll.id }}/" style="display: inline-block; padding: 10px 20px; background-color: #27ae60; color: white; border-radius: 10px; text-decoration: none; font-weight: bold; font-size: 1.2rem;">
        â• æˆ‘è¦æ–°å¢é€™å®¶åº—çš„é£²æ–™é¸é …
    </a>
</div>

<div class="order-form-container">
    <form action="/submit_order/" method="POST">
        {% csrf_token %}
        
        <h3>1. é¸æ“‡ä½ æƒ³å–çš„</h3>
        <select name="drink" required>
            <option value="" disabled selected>--- è«‹é¸æ“‡é£²å“ ---</option>
            {% for option in options %}
                <option value="{{ option.id }}">{{ option.title }} â€” ${{ option.price }}</option>
            {% endfor %}
        </select>

        <h3>2. ç”œåº¦(å¿…å¡«)</h3>
        <select name="sugar" required>
            <option value="" disabled selected>--- è«‹é¸æ“‡ç”œåº¦ ---</option>
            {% for s in sugar_levels %}
                <option value="{{ s.id }}">{{ s.level }}</option>
            {% endfor %}
        </select>

        <h3>3. å†°å¡Š(å¿…å¡«)</h3>
        <select name="ice" required>
            <option value="" disabled selected>--- è«‹é¸æ“‡å†°å¡Š ---</option>
            {% for i in ice_levels %}
                <option value="{{ i.id }}">{{ i.level }}</option>
            {% endfor %}
        </select>

        <h3>4. æƒ³è¦åŠ é»æ–™å—ï¼Ÿ (å¯è¤‡é¸)</h3>
        <div class="topping-container">
            {% for t in toppings %}
            <div class="topping-item">
                <input type="checkbox" name="topping" value="{{ t.id }}" id="topping_{{ t.id }}">
                <label for="topping_{{ t.id }}" style="font-size: 1.3rem;"> 
                    {{ t.name }} <span style="color: #27ae60;">(+${{ t.price }})</span>
                </label>
            </div>
            {% empty %}
            <p>é€™å®¶åº—ç›®å‰æ²’æä¾›åŠ æ–™å–”ï¼</p>
            {% endfor %}
        </div>

        <button type="submit" class="submit-btn">âœ… ç¢ºèªä¸‹å–®ä¸¦å›å‚³è³‡æ–™</button>
    </form>
</div>

<p style="text-align: center; margin-top: 20px;">
    <a href="/store/" style="font-size: 1.1rem; color: #7f8c8d; text-decoration: none;">â† è¿”å›åº—å®¶æ¸…å–®</a>
</p>
{% endblock %}